(this["webpackJsonpreact_redux-list-of-posts"]=this["webpackJsonpreact_redux-list-of-posts"]||[]).push([[0],{19:function(e,t,n){e.exports=n(42)},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var r,a=n(0),c=n.n(a),o=n(5),u=n.n(o),s=n(6),l=n(18),i=n(1),E=n(3),m=n(16),p=n(2),f=n.n(p),T=n(4),_="https://jsonplaceholder.typicode.com/";function d(){return y.apply(this,arguments)}function y(){return(y=Object(T.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(_,"users")).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return O.apply(this,arguments)}function O(){return(O=Object(T.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(_,"posts")).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return v.apply(this,arguments)}function v(){return(v=Object(T.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(_,"comments")).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){e.TYPE_SET_POSTS="TYPE_SET_POSTS",e.TYPE_SET_ERROR="TYPE_SET_ERROR",e.TYPE_SET_LOADING="TYPE_SET_LOADING",e.TYPE_SET_QUERY="TYPE_SET_QUERY",e.TYPE_SET_FILTERED_QUERY="TYPE_SET_FILTERED_QUERY",e.TYPE_DELETE_POST="TYPE_DELETE_POST",e.TYPE_DELETE_COMMENT="TYPE_DELETE_COMMENT"}(r||(r={}));var Y=function(e){return{type:r.TYPE_SET_ERROR,value:e}},h=function(e){return{type:r.TYPE_SET_LOADING,value:e}},D={posts:[],isError:!1,isLoading:!1,query:"",filterQuery:""},S=Object(E.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;if(void 0===e)return{posts:[],isError:!1,isLoading:!1,query:"",filterQuery:""};switch(t.type){case r.TYPE_DELETE_COMMENT:return Object(i.a)({},e,{posts:e.posts.map((function(e){return e.id!==t.postId?Object(i.a)({},e):Object(i.a)({},e,{comments:e.comments.filter((function(e){return e.id!==t.commentId}))})}))});case r.TYPE_DELETE_POST:return Object(i.a)({},e,{posts:e.posts.filter((function(e){return e.id!==t.value}))});case r.TYPE_SET_POSTS:return Object(i.a)({},e,{posts:t.value});case r.TYPE_SET_ERROR:return Object(i.a)({},e,{isError:t.value});case r.TYPE_SET_LOADING:return Object(i.a)({},e,{isLoading:t.value});case r.TYPE_SET_QUERY:return Object(i.a)({},e,{query:t.value});case r.TYPE_SET_FILTERED_QUERY:return Object(i.a)({},e,{filterQuery:t.value});default:return e}}),D,Object(E.a)(m.a)),L=n(17),R=n.n(L),j=(n(38),n(39),n(40),function(e){var t=e.user,n=t.name,r=t.email,a=t.address,o=a.city,u=a.street,s=a.zipcode;return c.a.createElement("div",{className:"user"},c.a.createElement("p",null,"Autor contacts:"),c.a.createElement("p",null,"name: ".concat(n,", email: ").concat(r)),c.a.createElement("p",null,"address: ".concat(s,", ").concat(u,", ").concat(o)))}),g=(n(41),function(e){var t=e.comment,n=e.postID,r=e.onDelete,a=t.name,o=t.email,u=t.body,s=t.id;return c.a.createElement("li",{className:"comment"},c.a.createElement("p",{className:"comment__autor"},c.a.createElement("span",null,"autor: ".concat(a," ")),c.a.createElement("span",null,"e-mail: ".concat(o))),c.a.createElement("p",{className:"comment__text"},u),c.a.createElement("button",{type:"button",onClick:function(){r(n,s)}},"X"))}),I=function(e){var t=e.comments,n=e.postID,r=e.onDelete;return c.a.createElement("ul",{className:"commentList"},t.map((function(e){return c.a.createElement(g,{key:e.id,comment:e,postID:n,onDelete:r})})))},N=function(e){var t=e.post,n=e.onDelete,r=t.title,a=t.body,o=t.user,u=t.comments,s=t.id;return c.a.createElement("li",{className:"post"},c.a.createElement("h3",{className:"post__title"},r),c.a.createElement("p",{className:"post__text"},a),c.a.createElement(j,{user:o}),c.a.createElement(I,{comments:u,onDelete:n,postID:s}))},Q=function(e){var t=e.postList,n=e.onDeletePost,r=e.onDeleteComment;return c.a.createElement("ul",{className:"postList"},t.map((function(e){return c.a.createElement(a.Fragment,{key:e.id},c.a.createElement(N,{post:e,onDelete:r}),c.a.createElement("button",{type:"button",onClick:function(){n(e.id)}},"delete Post"))})))},C=function(e){return e.posts},k=function(e){return e.isError},x=function(e){return e.isLoading},w=function(e){return e.query},F=function(e){return e.filterQuery},M={setQuery:function(e){return{type:r.TYPE_SET_QUERY,value:e}},setFilterQuery:function(e){return{type:r.TYPE_SET_FILTERED_QUERY,value:e}},deletePost:function(e){return{type:r.TYPE_DELETE_POST,value:e}},deleteComment:function(e,t){return{type:r.TYPE_DELETE_COMMENT,postId:e,commentId:t}},loadData:function(){return function(e){return e(Y(!1)),e(h(!0)),Promise.all([d(),P(),b()]).then((function(t){var n=Object(l.a)(t,3),a=n[0],c=n[1],o=n[2];e(h(!1));var u,s=c.map((function(e){return Object(i.a)({},e,{user:a.find((function(t){return t.id===e.userId})),comments:o.filter((function(t){return t.postId===e.id}))})}));e((u=s,{type:r.TYPE_SET_POSTS,value:u}))})).catch((function(){e(Y(!0)),e(h(!1))}))}}},U=Object(s.b)((function(e){return{isLoading:x(e),isError:k(e),query:w(e),posts:C(e),filterQuery:F(e)}}),M)((function(e){var t=e.isLoading,n=e.isError,r=e.query,o=e.posts,u=e.filterQuery,s=e.setQuery,l=e.setFilterQuery,i=e.deletePost,E=e.deleteComment,m=e.loadData;var p=Object(a.useMemo)((function(){return function(e,t){var n=new RegExp(t.trim(),"gi");return e.filter((function(e){return n.test(e.title)||n.test(e.body)}))}(o,u)}),[u,o]),f=Object(a.useCallback)(R()(l,1e3),[]);return o.length?c.a.createElement(c.a.Fragment,null,c.a.createElement("h1",null,"Dynamic list of posts"),c.a.createElement("input",{className:"search-field",value:r,type:"text",placeholder:"Enter search query",onChange:function(e){s(e.target.value),f(e.target.value)}}),c.a.createElement("div",{className:"App"},c.a.createElement(Q,{postList:p,onDeletePost:i,onDeleteComment:E}))):c.a.createElement(c.a.Fragment,null,c.a.createElement("h1",null,"Redux list of posts"),c.a.createElement("button",{type:"button",onClick:m,disabled:t},"Load posts"),c.a.createElement("p",null,t?"Loading":""),c.a.createElement("p",null,n?"Error occured. Try again later":""))}));u.a.render(c.a.createElement(s.a,{store:S},c.a.createElement(U,null)),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.cbf84268.chunk.js.map